# Начало работы с PyGDF

## 1. Подготовка Python
PyGDF был разработан на версии python ```3.11.8```</br>
Минимальная версия Python для работы с этим фреймворком ```3.11```</br>
Ядро фреймворка не будет работать на версии Python ниже ```3.11```</br>
</br>
Скачать нужную версию Python можно по прямым ссылкам ниже:</br>
[**Python 3.11.8 for Windows**](https://www.python.org/ftp/python/3.11.8/python-3.11.8-amd64.exe)</br>
[**Python 3.11.8 for MacOS**](https://www.python.org/ftp/python/3.11.8/python-3.11.8-macos11.pkg)</br>

## 2. Скачивание фреймворка
Скачать PyGDF в виде ZIP файла можно по [**этой**](https://github.com/LukovDev/PyGDF/archive/refs/heads/master.zip) прямой ссылке.</br>
Или использовать Git систему для клонирования репозитория ```git clone https://github.com/LukovDev/PyGDF.git```</br>

## 3. Подготовка шаблона проекта
Вы скачали фреймворк. Он идёт в виде готового шаблона проекта со встроенной системой сборки на основе ```PyInstaller```</br>
Разархивируйте архив и переименуйте полученную папку в имя вашего проекта.</br>

## 4. Использование этого шаблона проекта
Запустите файл ```pypi.bat``` который находится в основном каталоге проекта, чтобы установить все зависимости ядра.</br>
Если у вас не Windows, то введите в терминал строки ниже (но перед этим убедитесь что в терминале у вас основной каталог проекта):</br>
```sh
pip install -r build/pypi.txt
pip install -r src/gdf/pypi.txt
```
</br>
<p>
Откройте эту папку в любом редакторе кода (подойдёт даже sublime text).</br>
Структура проекта уже создана. Уже есть минимальные папки и файлы для создания гибкой и удобной структуры проекта.</br>
</p>
</br>
<p>Также хочу заметить ваше пристальное внимание к тому, что 17 июня 2024 года вышла новая версия numpy 2.0.0</br>
NumPy версии 2.0.0 и выше, не дружит с PyOpenGL и PyOpenGL_accelerate, из-за чего работа некоторых функций фреймворка могут выдавать критические ошибки. По этому если вы знаете что у вас установлен NumPy версии 2.0.0 и выше, пожалуйста, переустановите его при помощи консольной команды: pip install numpy==1.26.4</br>
</br>
<p>Если вы заметили что фреймворк работает хорошо и на версии numpy 2.0 и выше, сообщите мне чтобы я обновил информацию здесь.</p></br>

## 5. Подробнее о структуре проекта и его работе
PyGDF содержит такую структуру:
- build
- data
- src
- build.bat
- pypi.bat
- run.bat

---

### Папка build
- tools
- config.json
- pypi.txt

</br>

Папку ```tools``` не трогайте, там всего лишь находится python скрипт сборки вашей программы, и в ней же будут храниться временные файлы и папки при сборке проекта. Просто игнорируйте эту папку.</br>
</br>
Файл ```config.json``` содержит настройки сборки вашей программы в виде JSON файла. Позже вернёмся к содержимому этого файла.</br>
</br>
Файл ```pypi.txt``` по своему названию говорит всё за себя. Этот файл используется сценарием ```pypi.bat``` для установки всех нужных pypi библиотек. Пожалуйста, записывайте название всех отдельно-устанавливаемых библиотек в этот файл. Это надо чтобы другой человек смог установить все зависимости для запуска проекта у себя.</br>

---

### Папка data
Эта папка нужна для хранения всех ресурсов программы. В этой папке может храниться абсолютно всё что как-то подгружается программой. Например: Спрайты, Иконки, Шейдеры, Текстуры, Модели, и так далее...</br>
Эта папка по умолчанию копируется системой сборки, и размещается в папке ```/build/out/```. Вы можете изменить папку данных программы в конфигурационном файле системы сборки ```config.json```

---

### Папка src
- gdf
- main.py

</br>

Папка ```gdf``` - Это само ядро фреймворка. По своей сути является движком. Лезть в неё и что либо редактировать без должного понимания, я крайне не рекомендую. Можете просто подсматривать исходный код, чтобы лучше понять принцип работы той или иной функции.</br>
</br>
Файл ```main.py``` - Является основным запускаемым файлом по умолчанию (который вы также можете изменить в конфигурационном файле системы сборки). Пишите свой код в этом файле.</br>

---

### Файл build.bat
Запускает систему сборки проекта.</br>
В папке ```/build/tools/``` создаются временные файлы сборки, но после её окончания или ошибки, они удаляются автоматически.</br>
Также, на последнем этапе сборки проекта, после удаления временных файлов, идёт копирование папки ```data``` в папку ```build/out```</br>
В общем, если хотите собрать свою игру в бинарный вид, запустите этот файл.</br>
</br>
**Важно!** Во время компиляции проекта, у вас может вывестись предупреждения по типу таких:</br>
![](https://github.com/LukovDev/PyGDF/assets/103067811/3fd15368-edf8-4e53-bc40-71e39d2c6f6b)</br>
Если вы получили такие предупреждения, то просто игнорируйте их. Ничего страшного не будет. Это просто предупреждения в библиотеках NumPy и Numba.
</br>
**Весь результат сборки находится в папке** ```build/out```

---

### Файл pypi.bat
Устанавливает все используемые внешние библиотеки, которые необходимо установить для запуска проекта из исходного кода.</br>
Этот файл устанавливает все библиотеки из файла ```build/pypi.txt``` и заодно и все используемые библиотеки в ядре фреймворка.
</br>
**Важно!** Библиотеки будут установлены только если все из них были установлены без ошибок.

---

### Файл run.bat
Самый простой файл. Просто запускает файл ```src/main.py``` и ничего другого не делает.
</br>
После того как вы установили все нужные библиотеки для работы фреймворка и попытаетесь запустить программу, вы должны увидеть что-то типа такого:</br>
![](https://github.com/LukovDev/PyGDF/assets/103067811/74afcdbb-276d-4e42-8f53-329566386971)</br>

---

## Как устроен config.json файл системы сборки
По умолчанию его содержимое должно быть примерно таким:</br>
```json
{
    "program-name": "PyGDF Game",

    "main-file":    "/src/main.py",

    "data-folder":  "/data/",

    "program-icon": "/data/icons/build-icon.ico",

    "console-disabled": true,

    "pyinstaller-flags": [
        "--onefile", "--log-level WARN"
    ]
}
```

Страшно? Сейчас разберёмся как это настраивать под себя.</br>
</br>
- ```"program-name":``` - Это параметр, который хранит текст в двойных кавычках, в которых записано название, которое примет итоговый бинарный файл.
  Ничего сверхъестественного тут нет. Потому что вы сами потом сможете просто напросто переименовать итоговый бинарный файл. Это сделано для удобства!</br>
</br>
- ```"main-file":``` - Это очень важный параметр. Он хранит путь в двойных кавычках до основного запускаемого файла вашей программы.
  Он нужен чтобы система сборки поняла, какой файл является основным, и какой файл будет запускаться первым при запуске бинарника.</br>
</br>
- ```"data-folder":``` - Просто указывает путь в двойных кавычках до папки в которой вы храните данные программы. Система сборки просто скопирует эту папку
  в папку ```out``` которая появится в основной папке ```build``` после окончания сборки.</br>
</br>
- ```"program-icon":``` - Параметр, который хранит путь до иконки бинарного файла с расширением ```.ico```</br>
  Путь указывается в двойных кавычках. Обычно, иконка программы хранится в папке ```/data/``` вместе с другими файлами программы.</br>
</br>
- ```"console-disabled":``` - Параметр, который указывает системе сборки, выключить ли окно консоли программы при запуске бинарного файла или нет.
  Важно! Если ваша программа использует консольные команты по типу ```os.system("какая то команда")``` то окно консоли может появляться на несколько миллисекунд!</br>
</br>
- ```"pyinstaller-flags":``` - Это список дополнительных флагов при компиляции программы. Эти флаги встраиваются в основную команду компиляции программы, и вы можете вписать сюда что то своё.</br>
  ```--onefile``` - Сделает так, чтобы все файлы программы были в одном исполняемом файле (не касается файлов которые будут загружаться отдельно в программе).</br>
  ```--log-level``` - Устанавливает уровень логирования сборки.</br>
  Всего есть вот столько уровней: ```TRACE, DEBUG, INFO, WARN, ERROR, FATAL```</br>
  Каждые из них, указывают, какие сообщения выводить во время компиляции.</br>
  ```TRACE``` - Выводит абсолютно все сообщения и действия компилятора.</br>
  ```DEBUG``` - Выводит отладочные сообщения.</br>
  ```INFO``` - Выводит информационные сообщения компилятора.</br>
  ```WARN``` - Выводит предупреждения при компиляции.</br>
  ```ERROR``` - Выводит ошибки при компиляции.</br>
  ```FATAL``` - Выводит фатальные ошибки, при которых продолжать компиляцию невозможно.</br>
</br>

<p>
Вот и всё! Вы сами можете изменить любой из этих параметров под себя!</br>
Тут ничего сложного.</br>
</p>

---

Теперь вы знаете как работать со структурой этого фреймворка!</br>
</br>
Следующее, что вам нужно изучить, это примеры [кода](https://pygdf.github.io/tutorials.html) и примеры [игр.](https://pygdf.github.io/courses.html)</br>
Также рекомендую подсматривать в [документацию PyGDF](https://pygdf.github.io/api-docs.html)! (хотя, её желательно полностью изучить).
